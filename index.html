<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Temario Polic√≠a Foral</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body {
      background-color: #ffeb3b;
      font-family: 'Segoe UI', sans-serif;
      padding: 40px 10px;
    }

    .container {
      max-width: 900px;
    }

    h1 {
      font-weight: bold;
      margin-bottom: 30px;
      text-align: center;
    }

    .accordion-button {
      font-weight: bold;
    }

    .accordion-item {
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
    }

    .accordion-body {
      padding-top: 10px;
    }

    .tema-lista {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .tema-lista li {
      margin: 10px 0;
    }

    .tema-btn {
      background-color: #fff;
      padding: 12px 20px;
      border-radius: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
      border: none;
      width: 100%;
      text-align: left;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, background-color 0.2s ease;
    }

    .tema-btn i {
      color: #666;
    }

    .tema-btn:hover {
      transform: scale(1.03);
      background-color: #fff176;
    }

    /* Colores por bloque */
    .bloque1 .accordion-button,
    .bloque1 .accordion-body {
      background-color: #fff8e1;
    }

    .bloque2 .accordion-button,
    .bloque2 .accordion-body {
      background-color: #e1f5fe;
    }

    .bloque3 .accordion-button,
    .bloque3 .accordion-body {
      background-color: #e8f5e9;
    }

    .bloque4 .accordion-button,
    .bloque4 .accordion-body {
      background-color: #f3e5f5;
    }

    /* Modal */
    .custom-modal {
      position: fixed;
      z-index: 9999;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .custom-modal-content {
      background-color: #fffde7;
      display: flex;
      flex-wrap: wrap;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px #00000050;
      max-width: 800px;
      width: 90%;
      gap: 30px;
    }

    .modal-texto {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .modal-imagen {
      flex-shrink: 0;
      display: flex;
      align-items: center;
    }

    .modal-imagen img {
      max-height: 220px;
      width: auto;
    }

    body.modal-open main {
      filter: blur(5px);
      pointer-events: none;
      user-select: none;
    }
  </style>
</head>
<body>
<main>
  <div class="container">
    <h1>Temario Polic√≠a Foral</h1>
<div class="text-end mb-3">
  <button class="btn btn-outline-dark" onclick="mostrarModalModoJuego()">
    <i class="fas fa-cog"></i> Modo de Juego
  </button>
  <div class="text-end small text-muted mt-1">
  Modo actual: <strong id="modoActual">Examen</strong>
</div>
</div>
    <div class="accordion" id="temarioAccordion">

      <!-- Bloque 1 -->
      <div class="accordion-item bloque1">
        <h2 class="accordion-header" id="heading1">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#bloque1">
            üìö Ciencias Humanas
          </button>
        </h2>
        <div id="bloque1" class="accordion-collapse collapse" data-bs-parent="#temarioAccordion">
          <div class="accordion-body">
            <ul class="tema-lista">
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-user-shield"></i> Deontolog√≠a policial</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-wine-bottle"></i> Toxicoman√≠as y alcoholismo</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-users"></i> El contexto sociodemogr√°fico de la familia navarra</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-user-secret"></i> Criminolog√≠a</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-shield-alt"></i> Prevenci√≥n del delito</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-user-ninja"></i> El delincuente</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-heart-broken"></i> La v√≠ctima</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-balance-scale"></i> Ley Foral 14/2015 de 10 de abril</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-comments"></i> Habilidades sociales y t√©cnicas de comunicaci√≥n</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-pen-fancy"></i> Ortograf√≠a b√°sica</button></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Bloque 2 -->
      <div class="accordion-item bloque2">
        <h2 class="accordion-header" id="heading2">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#bloque2">
            üó∫Ô∏è Conocimiento del Territorio de Navarra
          </button>
        </h2>
        <div id="bloque2" class="accordion-collapse collapse" data-bs-parent="#temarioAccordion">
          <div class="accordion-body">
            <ul class="tema-lista">
              <li><button class="tema-btn" data-json="carreteras.json"><i class="fas fa-road"></i> Carreteras, mapa y traves√≠as</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-map"></i> Geograf√≠a de Navarra. Atlas 2023</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-globe-europe"></i> Navarra-Geograf√≠a</button></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Bloque 3 -->
     <div class="accordion-item bloque3">
        <h2 class="accordion-header" id="heading3">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#bloque3">
            ‚öñÔ∏è Legislaci√≥n
          </button>
        </h2>
        <div id="bloque3" class="accordion-collapse collapse" data-bs-parent="#temarioAccordion">
          <div class="accordion-body">
            <ul class="tema-lista">
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-balance-scale"></i> Las fuentes del Derecho</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-gavel"></i> Constituci√≥n Espa√±ola de 1978</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-euro-sign"></i> La Uni√≥n Europea</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-file-signature"></i> Actos administrativos</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-tasks"></i> Procedimiento administrativo</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-university"></i> LORAFNA</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-landmark"></i> Parlamento, C√°mara de Comptos y Defensor</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-users-cog"></i> Gobierno de Navarra</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-sitemap"></i> Administraci√≥n de Navarra</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-money-check-alt"></i> Hacienda P√∫blica Foral</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-user-shield"></i> Transparencia, Datos e Igualdad</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-gavel"></i> C√≥digo Penal</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-scroll"></i> Enjuiciamiento Criminal y Habeas Corpus</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-shield-alt"></i> Ley Seguridad Ciudadana</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-user-secret"></i> Fuerzas y Cuerpos de Seguridad</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-exclamation-triangle"></i> Ley Seguridad P√∫blica Navarra</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-id-badge"></i> Ley de Polic√≠as de Navarra</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-briefcase"></i> Estatuto del Personal APN</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-building"></i> Reglamento Polic√≠a Foral</button></li>
              <li><button class="tema-btn" data-json="XXXX.json"><i class="fas fa-exchange-alt"></i> Provisi√≥n de puestos</button></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Bloque 4 -->
     <div class="accordion-item bloque4">
  <h2 class="accordion-header" id="heading4">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#bloque4">
      üíª Conocimientos T√©cnicos
    </button>
  </h2>
  <div id="bloque4" class="accordion-collapse collapse" data-bs-parent="#temarioAccordion">
    <div class="accordion-body">
      <ul class="tema-lista">
        <li>
          <button class="tema-btn" data-json="XXXX.json">
            <i class="fas fa-desktop"></i> Sistema Operativo Windows 10
          </button>
        </li>
        <li>
          <button class="tema-btn" data-json="XXXX.json">
            <i class="fas fa-file-word"></i> Microsoft Word 2016
          </button>
        </li>
        <li>
          <button class="tema-btn" data-json="XXXX.json">
            <i class="fas fa-file-excel"></i> Microsoft Excel 2016
          </button>
        </li>
        <li>
          <button class="tema-btn" data-json="XXXX.json">
            <i class="fas fa-globe"></i> Internet, navegadores, intranet y correo electr√≥nico
          </button>
        </li>
        <li>
          <button class="tema-btn" data-json="XXXX.json">
            <i class="fas fa-hashtag"></i> Redes sociales y C√≥digos Maliciosos
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>

    </div>
  </div>
</main>

<!-- Modal -->
<div id="alertaTest" class="custom-modal">
  <div class="custom-modal-content">
    <div class="modal-texto">
      <h4><strong>Test Polic√≠a Foral</strong></h4>
      <p>Este test est√° basado en el temario oficial de la Polic√≠a Foral.<br>
        Pulsa ‚ÄòAceptar‚Äô para comenzar.</p>
      <button class="btn btn-primary mt-3" onclick="cerrarAlerta()">Aceptar</button>
    </div>
    <div class="modal-imagen">
      <img src="assets/policia-foral.png" alt="Polic√≠a Foral saludando" />
    </div>
  </div>
</div>
<div id="modalModoJuego" class="custom-modal" style="display: none;">
  <div class="custom-modal-content flex-column text-center">
    <h4>Selecciona el modo de juego</h4>
    <div class="d-grid gap-2 mt-3">
      <button class="btn btn-warning" onclick="setModoJuego('examen') "   title="20 preguntas aleatorias. No ver√°s si aciertas hasta el final.">üìù Modo Examen</button>
      <button class="btn btn-success" onclick="setModoJuego('repaso')" title="Te dir√° si aciertas o fallas cada pregunta justo al contestar.">üîç Modo Repaso</button>
      <button class="btn btn-info" onclick="setModoJuego('flashcards')" title="Solo muestra la pregunta. Al pulsar siguiente, se voltea y muestra la respuesta.">üÉè Modo Flashcards</button>
      <button class="btn btn-outline-secondary mt-2" onclick="cerrarModalModoJuego()">Cancelar</button>
    </div>
  </div>
</div>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  window.onload = () => {
    document.body.classList.add("modal-open");
    document.getElementById("alertaTest").style.display = "flex";
  }

  function cerrarAlerta() {
    document.body.classList.remove("modal-open");
    document.getElementById("alertaTest").style.display = "none";
  }
</script>
<script>
  function mezclarArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  document.querySelectorAll('.tema-btn').forEach(boton => {
    boton.addEventListener('click', async () => {
      const jsonFile = boton.dataset.json;

      try {
        const response = await fetch(`./data/${jsonFile}`);
        const todasLasPreguntas = await response.json();

        // Elimina preguntas repetidas (por texto)
        const preguntasUnicas = todasLasPreguntas.filter(
          (p, i, self) => i === self.findIndex(q => q.pregunta === p.pregunta)
        );

        // Baraja las preguntas y toma 20
        const preguntasAleatorias = mezclarArray(preguntasUnicas)
          .slice(0, 20)
          .map(p => ({
            ...p,
            opciones: mezclarArray([...p.opciones]) // Baraja las opciones tambi√©n
          }));

        localStorage.setItem("preguntas", JSON.stringify(preguntasAleatorias));
        localStorage.setItem("tema", boton.textContent.trim());
        localStorage.setItem("modoJuego", localStorage.getItem("modoJuego") || "examen");
        localStorage.setItem("archivoJson", jsonFile);

        window.location.href = "test.html";
      } catch (error) {
        alert("Error al cargar las preguntas. Aseg√∫rate de que el archivo JSON existe.");
        console.error(error);
      }
    });
  });

  function mostrarModalModoJuego() {
    document.getElementById("modalModoJuego").style.display = "flex";
    document.body.classList.add("modal-open");
  }

  function cerrarModalModoJuego() {
    document.getElementById("modalModoJuego").style.display = "none";
    document.body.classList.remove("modal-open");
  }

  function setModoJuego(modo) {
    localStorage.setItem("modoJuego", modo);
    document.getElementById("modoActual").textContent = modo.toUpperCase();
    cerrarModalModoJuego();
  }

  document.getElementById("modoActual").textContent =
    (localStorage.getItem("modoJuego") || "examen").toUpperCase();
</script>
</body>
</html>
